post_install() {
  getent group knot-resolver &>/dev/null || groupadd -r knot-resolver >/dev/null
  getent passwd knot-resolver &>/dev/null || useradd -r -g knot-resolver -d /dev/null -s /bin/false -c knot-resolver knot-resolver >/dev/null
  chown -R root:knot-resolver /etc/knot-resolver
}

post_upgrade() {
  chown -R root:knot-resolver /etc/knot-resolver

  if echo $2 | grep -q '^[0-4]'; then
    echo -e "  Knot Resolver version 5+ uses a different configuration for network interfaces."
    echo -e "  Please refer to https://knot-resolver.readthedocs.io/en/stable/upgrading.html"
  fi
}

post_remove() {
  getent passwd knot-resolver &>/dev/null && userdel knot-resolver >/dev/null
  getent group knot-resolver &>/dev/null && groupdel knot-resolver >/dev/null
  true
}
